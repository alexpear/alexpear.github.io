<!DOCTYPE HTML>
<html lang="en">
  <head>
   <meta charset="UTF-8">
   <title>Sleeping Planet Hex</title>
  </head>
  <body>
    <canvas id="canvas" width="900" height="850" style="background-color: #0000FF"/>
    <script type="text/javascript">
      
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');

      const SPACE_TYPES = [
        {
          name: 'Land',
          color: 'green'
        },
        {
          name: 'Land',
          color: 'green'
        },
        {
          name: 'Sea',
          color: 'blue'
        },
        // {
        //   name: 'Facility',
        //   color: 'grey'
        // },
      ];

      const FACILITIES = [
        'Battlenet Wiretap',
        'Hardlight Cannon',
        'Compromise Evaluator',
        'Labyrinth',
        'Connectomic Interface',
        'Terrestrial Metacogitator',
        'Knowledge Crater',
        'Battlenet Relay',
        'Comms Antenna',
        'Macron Ansible',
        'Micron Ansible',
        'Teleport Terminus',
        'Teleport Node',
        'Guardian Exocortex',
        'Thunderous Cartographer',
        'Automated Detention Vault',
        'Automated Detention Vault',
        'Automated Detention Vault',
        'Automated Detention Vault',
        'Automated Detention Vault',
        'Automated Detention Vault',
        'Automated Detention Vault',
        'Universal Capacitator',
        'Universal Capacitator',
        'Universal Capacitator',
        'Universal Capacitator',
        'Universal Capacitator',
        'Universal Capacitator',
        'Universal Capacitator',
        'Containment Vault',
        'Amusing Landmark',
        'Guardian Factory',
        'Seismic Camshaft',
        'Vortex Tower',
        'Pulse Generator',
        'Coliseum',
        'Cognitive Override',
        'Sanctuary',
        'Mimetic Relay',
        'Mimetic Relay',
        'Mimetic Relay',
        'Mimetic Relay',
        'Mimetic Relay',
        'Mimetic Relay',
        'Mimetic Relay',
        'Canal Excavator',
        'Incremental Solenoid',
        'Incremental Solenoid',
        'Incremental Solenoid',
        'Incremental Solenoid',
        'Incremental Solenoid',
        'Incremental Solenoid',
        'Incremental Solenoid',
        'Patrolled Zone',
        'Overseer\'s Palace',
        'Neural Beacon',
        'Subterranean Axle',
        'Uplift',
        'Floodplain Architect',
        'Friendly Crash Landing',
        'Actuation Node',
        'No Tactical Relevance',
        'Cognitive Phantasmagorium',
        'Crucible',
        'Quarantine Zone',
        'Keynode',
        'X-Reactor',
        'X-Reactor',
        'X-Reactor',
        'X-Reactor',
        'X-Reactor',
        'X-Reactor',
        'X-Reactor',
        'Fort',
        'Fort',
        'Fort',
        'Fort',
        'Fort',
        'Fort',
        'Fort',
      ];

      function randomOf (array) {
        const i = Math.floor(Math.random() * array.length);
        return array[i];
      }

      function drawGrid () {
        const GRIDWIDTH = 7;
        const SPACEWIDTH = 110;

        ctx.textAlign = 'center';
        ctx.font = '16px Arial';

        for (let r = 0; r < GRIDWIDTH; r++) {
          for (let c = 0; c < GRIDWIDTH; c++) {
            let x = c * SPACEWIDTH + 30;
            let y = r * SPACEWIDTH + 30;

            if (r % 2 === 1) {
              x += Math.floor(SPACEWIDTH / 2);
            }

            const type = randomOf(SPACE_TYPES);

            ctx.beginPath();
            ctx.rect(x, y, SPACEWIDTH, SPACEWIDTH);
            ctx.fillStyle = type.color;
            ctx.fill();
            ctx.stroke();

            if (type.name === 'Land') {
              const words = randomOf(FACILITIES)
                .split(' ');

              ctx.fillStyle = 'black';

              for (let w = 0; w < words.length; w++) {
                // const offset = 20 * Math.ceil(words.length / 2 + w - 1); 
                const offset = -20 * (words.length / 2 - w - 0.5);
                
                ctx.fillText(
                  words[w],
                  x + SPACEWIDTH / 2,
                  y + SPACEWIDTH / 2 + offset
                );
              }

              // ctx.fillText(text, x + SPACEWIDTH / 2, y + SPACEWIDTH / 2);
            }
          }
        }
      }

      drawGrid();

    </script>
  </body>
</html>
